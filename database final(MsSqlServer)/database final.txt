-- Veritabanını kontrol edip varsa siliyoruz
DROP DATABASE IF EXISTS Tradewnd;
CREATE DATABASE Tradewnd;
GO

USE Tradewnd;
GO
-- 2. Tabloları Oluşturma

CREATE TABLE Customers (
    CustomerID INT PRIMARY KEY,
    CompanyName NVARCHAR(40) NOT NULL,
    ContactName NVARCHAR(30),
    ContactTitle NVARCHAR(30),
    Address NVARCHAR(60),
    City NVARCHAR(15),
    Region NVARCHAR(15),
    PostalCode NVARCHAR(10),
    Country NVARCHAR(15),
    Phone NVARCHAR(24),
    Fax NVARCHAR(24)
);



CREATE TABLE Employees (
    EmployeeID INT PRIMARY KEY,
    LastName NVARCHAR(20) NOT NULL,
    FirstName NVARCHAR(10) NOT NULL,
    Title NVARCHAR(30),
    BirthDate DATETIME,
    HireDate DATETIME,
    Address NVARCHAR(60),
    City NVARCHAR(15),
    Region NVARCHAR(15),
    PostalCode NVARCHAR(10),
    Country NVARCHAR(15),
    HomePhone NVARCHAR(24),
    Extension NVARCHAR(4),
    ReportsTo INT NULL,
    CONSTRAINT FK_Employees_ReportsTo FOREIGN KEY (ReportsTo) 
    REFERENCES Employees(EmployeeID) ON DELETE NO ACTION
);

CREATE TABLE Categories (
    CategoryID INT PRIMARY KEY,
    CategoryName NVARCHAR(15) NOT NULL,
    Description NVARCHAR(MAX)
);

CREATE TABLE Suppliers (
    SupplierID INT PRIMARY KEY,
    CompanyName NVARCHAR(40) NOT NULL,
    ContactName NVARCHAR(30),
    ContactTitle NVARCHAR(30),
    Address NVARCHAR(60),
    City NVARCHAR(15),
    Region NVARCHAR(15),
    PostalCode NVARCHAR(10),
    Country NVARCHAR(15),
    Phone NVARCHAR(24),
    Fax NVARCHAR(24)
);

CREATE TABLE Shippers (
    ShipperID INT PRIMARY KEY,
    CompanyName NVARCHAR(40) NOT NULL,
    Phone NVARCHAR(24)
);

CREATE TABLE Products (
    ProductID INT PRIMARY KEY,
    ProductName NVARCHAR(40) NOT NULL,
    SupplierID INT,
    CategoryID INT,
    QuantityPerUnit NVARCHAR(20),
    UnitPrice DECIMAL(10,2),
    UnitsInStock INT,
    UnitsOnOrder INT,
    ReorderLevel INT,
    Discontinued BIT,
    CONSTRAINT FK_Products_Supplier FOREIGN KEY (SupplierID) REFERENCES Suppliers(SupplierID) ON DELETE SET NULL,
    CONSTRAINT FK_Products_Category FOREIGN KEY (CategoryID) REFERENCES Categories(CategoryID) ON DELETE SET NULL
);

CREATE TABLE Orders (
    OrderID INT PRIMARY KEY,
    CustomerID INT,
    EmployeeID INT,
    OrderDate DATETIME,
    RequiredDate DATETIME,
    ShippedDate DATETIME,
    ShipVia INT,
    Freight DECIMAL(10,2),
    ShipName NVARCHAR(40),
    ShipAddress NVARCHAR(60),
    ShipCity NVARCHAR(15),
    ShipRegion NVARCHAR(15),
    ShipPostalCode NVARCHAR(10),
    ShipCountry NVARCHAR(15),
    CONSTRAINT FK_Orders_Customer FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID) ON DELETE SET NULL,
    CONSTRAINT FK_Orders_Employee FOREIGN KEY (EmployeeID) REFERENCES Employees(EmployeeID) ON DELETE SET NULL
);

CREATE TABLE [Order Details] (
    OrderID INT,
    ProductID INT,
    UnitPrice DECIMAL(10,2),
    Quantity INT,
    Discount FLOAT,
    PRIMARY KEY (OrderID, ProductID),
    CONSTRAINT FK_OrderDetails_Order FOREIGN KEY (OrderID) REFERENCES Orders(OrderID) ON DELETE CASCADE,
    CONSTRAINT FK_OrderDetails_Product FOREIGN KEY (ProductID) REFERENCES Products(ProductID) ON DELETE CASCADE
);

CREATE TABLE Region (
    RegionID INT PRIMARY KEY,
    RegionDescription NVARCHAR(50)
);


-- 3. Örnek Veriler Ekleme (Her tabloya 10 veri eklenmiştir),

INSERT INTO Customers (CustomerID, CompanyName, ContactName, ContactTitle, Address, City, Country, Phone) VALUES
(1, 'Tech Corp', 'Alice Brown', 'Manager', '123 Elm St.', 'New York', 'USA', '555-1234'),
(2, 'Foodies', 'John Doe', 'CEO', '456 Oak St.', 'Los Angeles', 'USA', '555-5678'),
(3, 'Global Traders', 'Jane Smith', 'Director', '789 Pine St.', 'London', 'UK', '555-8765'),
(4, 'Eco Market', 'Michael Green', 'Owner', '321 Maple St.', 'Berlin', 'Germany', '555-4321'),
(5, 'Sunrise Ltd.', 'Emma Johnson', 'CFO', '654 Cedar St.', 'Tokyo', 'Japan', '555-6789');

INSERT INTO Employees (EmployeeID, LastName, FirstName, Title, BirthDate, HireDate, City, Country, HomePhone) VALUES
(1, 'Smith', 'John', 'Sales Manager', '1985-02-20', '2010-06-15', 'New York', 'USA', '555-1111'),
(2, 'Johnson', 'Emily', 'HR Manager', '1990-07-10', '2015-09-25', 'Los Angeles', 'USA', '555-2222'),
(3, 'Williams', 'Michael', 'IT Specialist', '1983-05-05', '2012-01-30', 'London', 'UK', '555-3333'),
(4, 'Brown', 'Sarah', 'Accountant', '1995-03-12', '2018-11-20', 'Berlin', 'Germany', '555-4444'),
(5, 'Davis', 'James', 'Marketing Manager', '1987-09-18', '2013-04-10', 'Tokyo', 'Japan', '555-5555');

INSERT INTO Categories (CategoryID, CategoryName, Description) VALUES
(1, 'Beverages', 'Soft drinks, coffees, teas, beers, and ales'),
(2, 'Condiments', 'Sweet and savory sauces, relishes, spreads, and seasonings'),
(3, 'Confections', 'Desserts, candies, and sweet breads'),
(4, 'Dairy Products', 'Cheeses'),
(5, 'Grains/Cereals', 'Breads, crackers, pasta, and cereal'),
(6, 'Meat/Poultry', 'Prepared meats'),
(7, 'Produce', 'Dried fruit and bean curd'),
(8, 'Seafood', 'Seaweed and fish'),
(9, 'Snacks', 'Chips and pretzels'),
(10, 'Baking Goods', 'Flour and baking ingredients');

INSERT INTO Suppliers (SupplierID, CompanyName, ContactName, ContactTitle, Address, City, Country, Phone) VALUES
(1, 'Exotic Liquids', 'Charlotte Cooper', 'Purchasing Manager', '49 Gilbert St.', 'London', 'UK', '171-555-2222'),
(2, 'New Orleans Cajun Delights', 'Shelley Burke', 'Order Administrator', 'P.O. Box 78934', 'New Orleans', 'USA', '100-555-4822'),
(3, 'Grandma Kelly’s Homestead', 'Regina Murphy', 'Sales Representative', '707 Oxford Rd.', 'Ann Arbor', 'USA', '313-555-5735'),
(4, 'Tokyo Traders', 'Yoshi Nagase', 'Marketing Manager', '9-8 Sekimai Musashino-shi', 'Tokyo', 'Japan', '81-555-3293'),
(5, 'Cooperativa de Quesos', 'Antonio del Valle', 'Export Administrator', 'Calle del Rosal 4', 'Oviedo', 'Spain', '985-555-2211');

INSERT INTO Products (ProductID, ProductName, SupplierID, CategoryID, QuantityPerUnit, UnitPrice, UnitsInStock, UnitsOnOrder, ReorderLevel, Discontinued) VALUES
(1, 'Chai', 1, 1, '10 boxes x 20 bags', 18.00, 39, 0, 10, 0),
(2, 'Chang', 1, 1, '24 - 12 oz bottles', 19.00, 17, 40, 25, 0),
(3, 'Aniseed Syrup', 1, 2, '12 - 550 ml bottles', 10.00, 13, 70, 25, 0),
(4, 'Chef Anton''s Cajun Seasoning', 2, 2, '48 - 6 oz jars', 22.00, 53, 0, 0, 0),
(5, 'Chef Anton''s Gumbo Mix', 2, 2, '36 boxes', 21.35, 0, 0, 0, 1);

INSERT INTO Shippers (ShipperID, CompanyName, Phone) VALUES
(1, 'Speedy Express', '555-1111'),
(2, 'United Package', '555-2222'),
(3, 'Federal Shipping', '555-3333'),
(4, 'DHL Express', '555-4444'),
(5, 'Blue Dart', '555-5555');

INSERT INTO Orders (OrderID, CustomerID, EmployeeID, OrderDate, RequiredDate, ShippedDate, ShipVia, Freight, ShipName, ShipAddress, ShipCity, ShipRegion, ShipPostalCode, ShipCountry) VALUES
(1, 1, 1, '2024-01-01', '2024-01-10', '2024-01-05', 1, 50.00, 'John Doe', '123 Elm St.', 'New York', 'NY', '10001', 'USA'),
(2, 2, 2, '2024-02-01', '2024-02-10', '2024-02-05', 2, 75.00, 'Jane Smith', '456 Oak St.', 'Los Angeles', 'CA', '90001', 'USA'),
(3, 3, 3, '2024-03-01', '2024-03-10', '2024-03-05', 3, 30.00, 'Michael Johnson', '789 Pine St.', 'Chicago', 'IL', '60601', 'USA'),
(4, 4, 4, '2024-04-01', '2024-04-10', '2024-04-05', 4, 90.00, 'Emily Davis', '321 Maple St.', 'Houston', 'TX', '77001', 'USA'),
(5, 5, 5, '2024-05-01', '2024-05-10', '2024-05-05', 5, 60.00, 'Daniel Wilson', '654 Cedar St.', 'Phoenix', 'AZ', '85001', 'USA');

INSERT INTO [Order Details] (OrderID, ProductID, UnitPrice, Quantity, Discount) VALUES
(1, 1, 18.00, 10, 0.05),
(2, 2, 19.00, 5, 0.10),
(3, 3, 10.00, 15, 0.00),
(4, 4, 22.00, 7, 0.15),
(5, 5, 21.35, 20, 0.05);


INSERT INTO Region (RegionID, RegionDescription) VALUES
(1, 'North America'),
(2, 'Europe'),
(3, 'Asia'),
(4, 'South America'),
(5, 'Africa');




